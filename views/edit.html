{% extends "base.html" %}

{% block title %} Modificar usuário {% endblock %}

{% block content %}

<div class="container">
  <div class="jumbotron mt-5">
    <div class="container">
      <h1 class="display-5 text-center">Modificar registro</h1>
      <hr class="my-2">
      <form class="form-horizontal" form="role" id="user-form">
        <div class="form-group">
          <label for="nome">Nome do usuário</label>
          <input type="text" class="form-control" name="nome" id="nome" aria-describedby="user-nome" value="{{user.Nome}}">
          <small id="helpId" class="form-text text-muted">Digite o nome completo do usuário</small>
        </div>
        <div class="form-group">
          <label for="nome">Email</label>
          <input type="email" class="form-control" name="email" id="email" aria-describedby="user-email" value="{{user.Email}}" required>
        </div>
        <button class="btn btn-warning btn-lg" type="submit" onclick="updateUser('{{user.ID}}')">Atualizar</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block js %}
<script>
  function updateUser(id) {
    $.ajax({
      url: "/v1/update/" + id,
      dataType: "json",
      method: "put",
      data: $("#user-form").serialize(),
      complete: function () {
        window.location.href = '/';
      }
    })
  }
</script>
{% endblock %}
